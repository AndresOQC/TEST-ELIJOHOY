import{d as v,a as h,o as y,w as l,V as x,r as i,W as d,X as V,h as a,f as s,P as q,S as f,i as c,Y as w,Z as Q,Q as u}from"./index-qRDw0VSr.js";import{Q as z}from"./QForm-lFtXmOSV.js";import{Q as C}from"./QPage-BgfOm9AV.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S=v({name:"LoginPage",setup(){const o=V(),e=x(),p=i({email:"",password:""}),m=i(!1),g=i(!1),r=i(!1);return{form:p,showPassword:m,rememberMe:g,loading:r,login:async()=>{r.value=!0;try{const n=await e.login(p.value);if(n.success&&e.isAuthenticated){d.create({message:"¡Bienvenido de nuevo!",color:"positive",icon:"check_circle",position:"top"});const b=localStorage.getItem("testRespuestas");localStorage.getItem("pendingTestFinalization")==="true"?(console.log("Finalización de test pendiente, redirigiendo al test..."),o.push("/dashboard/test")):b?(console.log("Detectadas respuestas de test, se sincronizarán en la página del test..."),d.create({message:"Respuestas detectadas, continuando con el test...",color:"positive",icon:"save",position:"top"}),o.push("/dashboard/test")):o.push("/dashboard")}else d.create({message:n.message||"Credenciales incorrectas",color:"negative",icon:"error",position:"top"})}catch(n){console.error("Login error:",n),d.create({message:"Error de conexión. Por favor intenta nuevamente.",color:"negative",icon:"error",position:"top"})}finally{r.value=!1}}}}}),I={class:"login-container"},k={class:"login-icon-wrapper q-mb-lg"},B={class:"row justify-between items-center"},F={class:"text-center q-mt-md"},R={class:"text-center q-mt-md"};function $(o,e,p,m,g,r){return y(),h(C,{class:"login-page"},{default:l(()=>[a("div",I,[s(q,{class:"login-card glass-card"},{default:l(()=>[s(f,{class:"text-center q-pb-md"},{default:l(()=>[a("div",k,[s(c,{name:"login",size:"56px",color:"white"})]),e[4]||(e[4]=a("div",{class:"text-h3 text-weight-bold text-white q-mb-sm"}," ¡Bienvenido de vuelta! ",-1)),e[5]||(e[5]=a("div",{class:"text-h6 text-weight-medium text-yellow-9 q-mb-xs"}," Iniciar Sesión ",-1)),e[6]||(e[6]=a("div",{class:"text-body1 text-white-7"}," Accede a tu cuenta y continúa descubriendo tu vocación ",-1))]),_:1}),s(f,{class:"q-pt-none"},{default:l(()=>[s(z,{onSubmit:o.login,class:"q-gutter-md"},{default:l(()=>[s(w,{modelValue:o.form.email,"onUpdate:modelValue":e[0]||(e[0]=t=>o.form.email=t),type:"email",label:"Correo Electrónico",outlined:"",color:"purple-7",rules:[t=>!!t||"El correo es requerido",t=>/.+@.+\..+/.test(t)||"Correo inválido"],"lazy-rules":"",class:"modern-input"},{prepend:l(()=>[s(c,{name:"email",color:"purple-7"})]),_:1},8,["modelValue","rules"]),s(w,{modelValue:o.form.password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.form.password=t),type:o.showPassword?"text":"password",label:"Contraseña",outlined:"",color:"purple-7",rules:[t=>!!t||"La contraseña es requerida"],"lazy-rules":"",class:"modern-input"},{prepend:l(()=>[s(c,{name:"lock",color:"purple-7"})]),append:l(()=>[s(c,{name:o.showPassword?"visibility":"visibility_off",class:"cursor-pointer",color:"purple-7",onClick:e[1]||(e[1]=t=>o.showPassword=!o.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),a("div",B,[s(Q,{modelValue:o.rememberMe,"onUpdate:modelValue":e[3]||(e[3]=t=>o.rememberMe=t),label:"Recordarme",color:"purple-7",class:"text-white"},null,8,["modelValue"]),s(u,{flat:"","no-caps":"",color:"yellow-9",label:"¿Olvidaste tu contraseña?",to:"/auth/recuperar-password",size:"sm"})]),s(u,{unelevated:"",type:"submit",size:"lg",color:"yellow-9","text-color":"purple-10",label:"Iniciar Sesión","icon-right":"login",class:"full-width btn-gradient text-weight-bold",loading:o.loading,"no-caps":""},null,8,["loading"]),a("div",F,[e[7]||(e[7]=a("div",{class:"text-body2 text-white q-mb-sm"}," ¿No tienes cuenta? ",-1)),s(u,{outline:"","no-caps":"",color:"yellow-9",label:"Regístrate Gratis",to:"/auth/registro",class:"full-width",icon:"person_add"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),a("div",R,[s(u,{flat:"","no-caps":"",color:"white",label:"Volver al Inicio",to:"/",icon:"arrow_back"})])])]),_:1})}const M=P(S,[["render",$],["__scopeId","data-v-69cd11d9"]]);export{M as default};
